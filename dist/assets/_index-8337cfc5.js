import{R as u,j as e,c as S,u as k,_ as C}from"./index-4d3d29ea.js";import{b as T,c as D,L as Y}from"./tour-b4d12185.js";import{c as h,G as N}from"./iconBase-dd6217a7.js";import{A,m as L,s as v,e as M,_ as B}from"./PulseLoader-5fbed29c.js";import{B as H}from"./index.esm-562efd5f.js";import{a as R,d as J}from"./dayjs.min-734c85ea.js";const E={hidden:{opacity:0,top:100,transition:{duration:.2}},show:{opacity:1,top:50,transition:{duration:.2}}},G=[10,25,50,100],P=({defaultvalue:t,rows:c=G,onChange:i})=>{const[s,o]=u.useState(!1),d=()=>o(x=>!x),l=x=>()=>{i(x),d()};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:d,className:h("form-select rounded-lg w-[4rem] h-8 md:h-10 md:w-[5rem] text-gray-500 flex justify-center items-center","border-gray-300 focus:border-gray-300 focus:ring-0"),children:t}),e.jsx(A,{children:s&&e.jsx(L.div,{className:"absolute bg-white rounded-md shadow-md w-[6rem] top-14 z-10","aria-label":"row-select-wrapper",variants:E,initial:"hidden",animate:"show",exit:"hidden",children:c.map((x,y)=>e.jsx("div",{role:"button",onClick:l(x),tabIndex:0,className:h("flex items-center justify-between px-3 py-2 text-[1.1rem]",t===x?"bg-blue-100/50 text-black":"text-gray-400"),children:e.jsx("span",{children:x})},y))})})]})},O=({row:t,onChangeRow:c,onChangeSearch:i})=>e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between","aria-label":"filtering",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm md:text-base","aria-label":"filtering__row-select",children:[e.jsx("p",{className:"text-gray-700",children:"Tampilkan"}),e.jsx(P,{defaultvalue:t,onChange:s=>c(s)}),e.jsx("p",{className:"text-gray-700",children:"Masukan"})]}),e.jsxs("div",{className:"relative w-full md:w-4/12 lg:w-2/12 my-5","aria-label":"filtering__input-search",children:[e.jsx("input",{className:h("border-gray-300 focus:border-gray-300 focus:ring-0 px-4 text-gray-900","focus:outline-none w-full tracking-wide rounded-lg","placeholder:font-medium placeholder:tracking-wide placeholder:text-gray-400 text-sm md:text-base","peer/search"),onChange:i,type:"search",placeholder:"Cari nama tour"}),e.jsx(H,{className:"absolute top-3 right-4 peer-focus/search:hidden peer-hover/search:hidden"})]})]});function z(t){return N({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M7 10l5 5 5-5H7z"}}]})(t)}function V(t){return N({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M7 14l5-5 5 5H7z"}}]})(t)}var $={exports:{}};(function(t,c){(function(i,s){t.exports=s(R)})(S,function(i){function s(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var o=s(i),d={name:"id",weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),weekStart:1,formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},ordinal:function(l){return l+"."}};return o.default.locale(d,null,!0),d})})($);function K(){const t=s=>{const o=document.createElement("textarea");o.value=s,document.body.appendChild(o),o.focus({preventScroll:!0}),o.select();try{document.execCommand("copy"),v({message:"Behasil copy to clipboard"})}catch(d){console.error("Unable to copy to clipboard",d),M({message:"Gagal copy to clipboard"})}document.body.removeChild(o)},c=async s=>{try{await navigator.clipboard.writeText(s),v({message:"Behasil copy to clipboard"})}catch{M({message:"Gagal copy to clipboard"})}};return[async s=>{navigator.clipboard?c(s):t(s)}]}const U={local:"bg-blue-500 px-7",pending:"bg-yellow-500 px-2",success:"bg-green-600 px-5",changed:"bg-gray-500 px-[.8rem]"},q=({status:t})=>e.jsx("div",{className:h("w-max py-[.3rem] rounded-md text-white mx-auto text-sm md:text-[.95rem] capitalize",U[t]??"bg-blue-600"),"aria-label":"badge",children:t==="success"?"Synced":t}),Q=["Tanggal di buat","Nama Tour","Status","Action"],W=({data:t})=>{const{mutate:c,status:i}=T(),s=k(),[o,d]=u.useState("Nama Tour"),[l,x]=u.useState("asc"),[y]=K(),g=u.useMemo(()=>["Tanggal di buat"].includes(o)?t.sort((r,n)=>{const m=new Date(r.created_at).getTime(),_=new Date(n.created_at).getTime();return l==="asc"?m-_:_-m}):["Nama Tour"].includes(o)?t==null?void 0:t.sort((r,n)=>{var m,_;return l==="asc"?(m=r.name)==null?void 0:m.localeCompare(n.name):(_=n.name)==null?void 0:_.localeCompare(r.name)}):t,[t,o,l]),b=r=>()=>{x(n=>n==="asc"?"desc":"asc"),d(r)},j=r=>()=>s(`/tour/${r}`),a=r=>()=>s(`/editor/${r}`),p=r=>()=>{const n=window.location.host;y(`${n}/tour/${r}`)},f=r=>()=>{confirm("Yakin ingin menghapus tour ?")&&c({tour_id:r},{onSuccess:()=>{v({message:"Berhasil menghapus tour"})},onError:()=>{M({message:"Gagal mengapus tour"})}})};return e.jsx("div",{className:"overflow-x-auto","aria-label":"table-container",children:e.jsxs("table",{className:"w-full border-collapse min-w-[1500px]",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-blue-700 text-white",children:Q.map((r,n)=>e.jsx("th",{className:"w-1/6 font-medium py-2 lg:py-3 cursor-pointer text-sm md:text-base",children:e.jsxs("div",{className:"w-max mx-auto flex items-center",onClick:b(r),children:[r,e.jsx("div",{className:"flex flex-col opacity-60 hover:opacity-100",children:r!=="Action"&&e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"translate-y-1"}),e.jsx(z,{className:"-translate-y-1"})]})})]})},n))})}),e.jsxs("tbody",{children:[g==null?void 0:g.map((r,n)=>e.jsxs("tr",{className:h((n+1)%2===0?"bg-blue-500/10":""),children:[e.jsx("td",{className:"w-1/6 py-[.3rem] md:py-[.5rem] lg:py-4 text-center text-sm md:text-base",children:J(r.created_at).locale("id").format("ddd D MMM YYYY")}),e.jsx("td",{className:"w-1/6 py-[.3rem] md:py-[.5rem] lg:py-4 text-center text-sm md:text-base",children:r.name}),e.jsx("td",{className:"w-1/6 py-[.3rem] md:py-[.5rem] lg:py-4 text-center",children:e.jsx(q,{status:r.sync_status})}),e.jsx("td",{className:"w-1/6 py-[.3rem] md:py-[.5rem] lg:py-2 text-center text-sm md:text-base",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(w,{onClick:j(r.id),children:"Jelajahi"}),e.jsx(w,{onClick:a(r.id),children:"Edit"}),e.jsx(w,{onClick:p(r.id),children:"Share"}),e.jsx(w,{disabled:i==="loading",onClick:f(r.id),children:i==="loading"?e.jsx(B,{color:"skyblue",size:10}):"Hapus"})]})})]},n)),e.jsx("tr",{})]})]})})},w=({children:t,...c})=>e.jsx("button",{...c,className:h("transition px-5 md:px-3 py-[.30rem] md:py-[.35rem] rounded-md","text-base bg-white text-blue-600","border md:border-2 border-blue-600","text-sm md:text-[15px]","hover:bg-blue-600 hover:text-white"),type:"button",children:t});function X(t,c){const[i,s]=u.useState(t);return u.useEffect(()=>{const o=setTimeout(()=>s(t),c||500);return()=>{clearTimeout(o)}},[t,c]),i}const Z=({data:t,row:c,page:i,rowInfo:s,onSetPage:o})=>{const d=u.useMemo(()=>[...Array(Math.ceil(((t==null?void 0:t.length)??1)/c))].map((p,f)=>f+1),[t==null?void 0:t.length,c]),l=Math.ceil(((t==null?void 0:t.length)??1)/c)>5?5:Math.ceil(((t==null?void 0:t.length)??1)/c),x=[...Array(l)].map((a,p)=>p+Math.max(i-Math.floor(l/2),1)),y=a=>()=>o(a),g=()=>o(a=>Math.max(1,a-1)),b=()=>o(a=>Math.min(a+1,d.length)),j=x.map(a=>{if(a<=d.length)return e.jsx("button",{className:h("font-normal tracking-wide rounded-md w-10 text-sm md:text-base",i===a?"text-white border bg-blue-500 h-[2.1rem]":"text-blue-500 border border-blue-500 h-9"),onClick:y(a),children:a},a)});return e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-y-4 mt-8 md:mt-4",children:[e.jsx("div",{"aria-label":"information",children:e.jsxs("p",{className:"text-sm md:text-base",children:["Menampilkan ",s==null?void 0:s.start," sampai ",s==null?void 0:s.end," dari"," ",s==null?void 0:s.length," masukan"]})}),e.jsxs("div",{className:"flex items-center gap-3 tracking-wide text-sm md:text-base","aria-label":"pagination-button",children:[e.jsx("button",{onClick:g,className:h("text-gray-500 bg-gray-100 py-2 px-4 rounded-lg",i===1&&"cursor-not-allowed"),children:"Sebelumnya"}),j,e.jsx("button",{onClick:b,className:h("text-gray-500 bg-gray-100 py-2 px-4 rounded-lg",i===d.length&&"cursor-not-allowed"),children:"Selanjutnya"})]})]})};function ne(){const{data:t,status:c,refetch:i}=D(),[s,o]=u.useState(""),d=X(s,1e3),[l,x]=u.useState(10),[y,g]=u.useState({start:0,end:0,length:0}),[b,j]=u.useState(1),a=u.useMemo(()=>{var n;return(n=t==null?void 0:t.data)==null?void 0:n.filter(m=>m.name.toLowerCase().includes(d.toLowerCase()))},[d,t==null?void 0:t.data]),p=u.useMemo(()=>{let n,m;return d.length?(n=(b-1)*l,m=n+l,g({start:a!=null&&a.length?n+1:0,end:m>((a==null?void 0:a.length)??0)?(a==null?void 0:a.length)??0:m,length:(a==null?void 0:a.length)??0})):(n=(b-1)*l,m=n+l,g({start:n+1,end:m>((t==null?void 0:t.data.length)??0)?(t==null?void 0:t.data.length)??0:m,length:(t==null?void 0:t.data.length)??0})),a==null?void 0:a.slice(n,m)},[d.length,a,b,l,t==null?void 0:t.data.length]),f=u.useCallback(n=>{x(n),j(1)},[]),r=u.useCallback(n=>{o(n.target.value),j(1)},[]);return e.jsx(Y,{children:e.jsxs("div",{className:"mx-5 my-4",children:[c==="loading"?e.jsx("div",{className:"h-[calc(100vh_-_100px)] flex justify-center items-center",children:e.jsxs("div",{className:"w-max mx-auto p-2","aria-label":"groups-loader",children:[e.jsx(C,{color:"blue",width:200,height:3}),e.jsx("p",{className:"text-sm md:text-base mt-2 text-gray-500 text-center",children:"Mengambil data tour ..."})]})}):null,c==="success"?(p==null?void 0:p.length)===0?e.jsx("div",{className:"py-10",children:e.jsx("p",{className:"text-center text-lg font-light",children:"Tidak ada data"})}):e.jsxs(e.Fragment,{children:[e.jsx(O,{row:l,onChangeRow:f,onChangeSearch:r}),e.jsx(W,{data:p??[]}),e.jsx(Z,{page:b,row:l,rowInfo:y,onSetPage:j,data:d?a:t==null?void 0:t.data})]}):null,c==="error"?e.jsx("div",{className:"h-[calc(100vh_-_100px)] flex justify-center items-center",children:e.jsxs("div",{className:"w-max mx-auto my-4 flex flex-col items-center justify-center gap-3",children:[e.jsx("p",{className:"text-sm md:text-base mt-2 text-gray-500",children:"Gagal mengambil data tour"}),e.jsx("button",{className:h("transition px-5 md:px-7 py-[.30rem] md:py-[.35rem] text-base border md:border-2 border-[#1F3DBD] bg-white rounded-md text-[#1F3DBD]","text-sm md:text-base"),type:"button",onClick:()=>i(),children:"Muat ulang"})]})}):null]})})}export{ne as default};
